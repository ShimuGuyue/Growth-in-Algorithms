# 题目描述

[P1064 [NOIP 2006 提高组] 金明的预算方案 - 洛谷](https://www.luogu.com.cn/problem/P1064)

![image-20251003161254376](%E9%87%91%E6%98%8E%E7%9A%84%E9%A2%84%E7%AE%97%E6%96%B9%E6%A1%88.assets/image-20251003161254376.png)

# 解题思路

有依赖的01背包问题。

由于附件只能在主件已经购买的情况下购买，而附属关系最多只有一层，并且一个逐渐最多有 $2$ 个附件，因此可以将一个主件及其所有附件看作一个整体。

进行动态规划的过程，如果当前加入的物品是一个**附件**，则跳过该物品，等待其主件加入时一起考虑；如果当前加入的物品是一个**主件**，则分别考虑**不要**、**只要主件**、**要主件和第一个附件**、**要主件和第二个附件**和**要主件和全部两个附件**五种情况分别讨论，取最大值。

由于只加入主件的时候才进行动态规划，因此需额外记录**上一个主件**的位置。

# 代码实现

![image-20251003162112517](%E9%87%91%E6%98%8E%E7%9A%84%E9%A2%84%E7%AE%97%E6%96%B9%E6%A1%88.assets/image-20251003162112517.png)